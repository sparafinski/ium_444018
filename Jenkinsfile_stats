pipeline {
    agent {
	docker {
		image 'docker_image'
	}
	}
    parameters{
        buildSelector(
            defaultSelector: lastSuccessful(),
            name: 'BUILD_SELECTOR',
            description: 'Which build to use for copying artifacts'
        )
    }
    stages {
        stage("Script") {
            steps {
                copyArtifacts fingerprintArtifacts: true, projectName: 's444018-create-dataset', selector: buildParameter('BUILD_SELECTOR')
                sh 'chmod +x ./lab2/stats.sh'
                sh "./lab2/stats.sh"
                archiveArtifacts 'stats.txt'
            }
        }
    }
}